Subject: درخواست تخصیص چند IP و فعال‌سازی تنظیمات شبکه برای VM مورد استفاده در محیط کانتینری

سلام وقت بخیر

برای اجرای چند سرویس نرم‌افزاری در محیط کانتینری (Docker) روی یک VM، نیاز داریم که این VM بتواند چند آدرس IP معتبر از همان VLAN فعلی دریافت و استفاده کند. این کار برای ما امکان می‌دهد که هر سرویس یک IP مستقل داشته باشد و بدون نیاز به پورت‌های مختلف، به‌صورت مستقیم در شبکه سازمان قابل دسترس باشد.

برای این منظور، لطفاً موارد زیر را برای VM با نام/شناسه <VM-NAME> اعمال کنید:

۱) تخصیص چند آدرس IP معتبر به VM
لطفاً ۵ تا ۱۰ آدرس IP آزاد از VLAN فعلی (مثلاً VLAN XX) برای این VM رزرو کنید.
این IPها توسط کانتینرهای داخل VM استفاده می‌شوند و باید در شبکه قابل روت شدن باشند.
۲) فعال‌سازی سه گزینه شبکه در Port Group مربوط به VM
برای اینکه کانتینرها بتوانند MAC Address و IP مستقل داشته باشند، لازم است روی Port Group مربوط به این VM، سه گزینه زیر روی حالت Accept قرار بگیرند:

Promiscuous Mode → Accept
MAC Address Changes → Accept
Forged Transmits → Accept
این تنظیمات برای اجرای شبکه macvlan در Docker ضروری هستند. macvlan برای هر کانتینر یک MAC Address مجزا ایجاد می‌کند و ESXi باید اجازه عبور این MACها را بدهد.

۳) توضیح درباره امنیت و ریسک
این تنظیمات فقط برای همین VM اعمال می‌شود و:

هیچ تغییری در VLAN یا سایر VMها ایجاد نمی‌کند
هیچ دسترسی اضافی خارج از VM ایجاد نمی‌کند
فقط اجازه می‌دهد ترافیک MACهای جدیدی که از داخل همین VM تولید می‌شود، عبور کند
از نظر امنیتی معادل حالتی است که VM چند کارت شبکه مجازی داشته باشد
۴) نتیجه نهایی
بعد از اعمال این تنظیمات:

هر کانتینر داخل VM می‌تواند یک IP واقعی از شبکه سازمان داشته باشد
سرویس‌ها بدون نیاز به پورت‌های مختلف، با IP مستقل در دسترس خواهند بود
مدیریت و مانیتورینگ سرویس‌ها ساده‌تر و استانداردتر می‌شود
اگر نیاز به اطلاعات فنی بیشتر یا تست دارید، در خدمت هستم.

با تشکر
<نام شما>